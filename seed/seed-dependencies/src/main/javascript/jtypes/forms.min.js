/*! ------------------------------------------------------------------------
//                               jTypes 2.1.0b
//  ------------------------------------------------------------------------
//
//                   Copyright 2013 Gaulinsoft Corporation
//
//       Licensed under the Apache License, Version 2.0 (the "License");
//      you may not use this file except in compliance with the License.
//                   You may obtain a copy of the License at
//
//                 http://www.apache.org/licenses/LICENSE-2.0
//
//     Unless required by applicable law or agreed to in writing, software
//      distributed under the License is distributed on an "AS IS" BASIS,
//  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
//     See the License for the specific language governing permissions and
//                       limitations under the License.
*/
(function(n,f,b){var p=Object,x=p.defineProperty,y=function(a){return"jTypes Error: "+b.format.apply(b,arguments)},k=f(n.document),c=null,d={},l=0,z=function(a,e){a=f(a).first();e=f(e).first();var c=b.asInt(a.attr("tabindex")),d=b.asInt(e.attr("tabindex"));isFinite(c)||(c=b.settings.MAX_INT);isFinite(d)||(d=b.settings.MAX_INT);return c!==d?c-d:0===a.add(e).index(a)?-1:1};f(n);k.bind("click",function(){c&&c.as(d.Element).blur()}).bind("keydown",function(a){var e=b.now();if(!(e-l<b.settings.DOCUMENT_KEYPRESS_INTERVAL))switch(l=
e,a.which){case 9:var e=[],j=b.asArray(f("input, select, textarea").toArray());if(!j.length)break;j.sort(z);for(var h=0,k=j.length;h<k;h++){var g=f(j[h]),m=g.data(b.settings.JQUERY_DATA_PREFIX);!m||!m.visible||m.disabled?j[h]=null:(g=b.asInt(g.attr("tabindex")),!isFinite(g)||0>g?j[h]=null:e.push(m))}if(!e.length)break;a.preventDefault();g=f.inArray(c,e);-1===g||!a.shiftKey&&++g===e.length?g=0:a.shiftKey&&g--;e[g].as(d.Element).focus();break;case 27:if(c)return a.preventDefault(),c.as(d.Element).blur(),
!1}});b.property(d,"Element",{e:!0,v:b("abstract",function(a){if(!a||!a.jquery||0==a.length||!(a instanceof f))throw y("An `Element` requires one DOM element in a jQuery wrapper.");this.$_element=a.first().data(b.settings.JQUERY_DATA_PREFIX,this.__self)},{"protected $_element":null,"public virtual bind":function(){this.$_element.bind.apply(this.$_element,arguments);return this},"public abstract blur":function(){return c===this.__self?(c=null,!0):!1},"public abstract dispose":function(){this.$_element.removeData(b.settings.JQUERY_DATA_PREFIX)},
"public abstract focus":function(){c&&c!==this.__self&&c.as(d.Element).blur();if(this.disabled)return!1;c=this.__self;return!0},"public virtual reset":function(){c===this.__self&&this.blur();return this},"public virtual trigger":function(){this.$_element.triggerHandler.apply(this.$_element,arguments);return this},"public virtual unbind":function(){this.$_element.unbind.apply(this.$_element,arguments);return this},"public virtual disabled":{get:function(){return b.asBool(this.$_element.prop("disabled"))},
set:function(a){(a=b.asBool(a))&&c===this.__self&&this.blur();this.$_element.prop("disabled",a)}},"public abstract visible":{get:b.empty()}})});var q=function(a){a=a.data;c&&c!==this.__self&&c.as(d.Element).blur();a.disabled||a.$_element.triggerHandler("click")},r=function(a){var c=b.now();if(c-l<b.settings.DOCUMENT_KEYPRESS_INTERVAL)return!1;var d=a.data;switch(a.which){case 13:case 32:return l=c,a.preventDefault(),d.$_element.triggerHandler("click"),!1}},s=function(a){a=a.data;a.disabled()||a.$_element.triggerHandler("mouseenter")},
t=function(a){a=a.data;a.disabled()||a.$_element.triggerHandler("mouseleave")};b.property(d,"Button",{e:!0,v:b(d.Element,function(a,c){this.__base(a);this._img=b.asBool(c);this.$_button=f('<span class="button" />');this.$_icon=f(c?"<img />":"<span />");var d=b.asString(this.$_element.attr("class")),h=b.asString(this.$_element.attr("style"));d&&this.$_button.addClass(d);h&&this.$_button.attr("style",h);this.disabled&&this.$_button.addClass("disabled");this.$_element.hide().after(this.$_button.bind("click",
this,q).bind("vmouseover",this,s).bind("vmouseout",this,t));this.text=this.$_element.val()||""},{"protected $_button":null,"protected $_icon":null,"private _img":!1,"public override blur":function(){if(!this.__base.blur())return this;this.$_button.removeClass("focused");k.unbind("keydown",r);this.$_element.triggerHandler("blur");return this},"public override dispose":function(){this.__base.dispose();this.$_button.remove();this.$_element.unbind("click",q).unbind("vmouseover",s).unbind("vmouseout",
t).show()},"public override focus":function(){if(!this.__base.focus())return this;b.scrollTo(this.$_button);this.$_button.addClass("focused");k.keydown(this,r);this.$_element.triggerHandler("focus");return this},"public override reset":function(){this.__base.reset();this.$_button.removeClass("error");this.text=this.$_element.prop("defaultValue")||""},"public override disabled":{set:function(a){(this.__base.disabled=a)?this.$_button.addClass("disabled"):this.$_button.removeClass("disabled")}},"public virtual icon":{get:function(){return!this._img?
b.asString(this.$_icon.html()):b.asString(this.$_element.attr("src"))},set:function(a){(a=b.asString(a))?(this._img?(this.$_element.attr("src",a),this.$_icon.attr("src",a)):this.$_icon.html(a),this.$_button.prepend(this.$_icon)):(this._img&&this.$_element.removeAttr("src"),this.$_icon.detach())}},"public virtual text":{get:function(){return b.asString(this.$_element.val())},set:function(a){a=b.asString(a);this.$_element.val(a);this.$_button.text(a);this.icon&&this.$_button.prepend(this.$_icon)}},
"public override visible":{get:function(){return!this.$_button.is(":hidden")}}})});var u=function(a){a=a.data;c===a.__self&&(c=null);a.$_textbox.removeClass("focused multiline");a.$_element.hasClass("floating")&&a.$_element.removeClass("focused");if(!b.compatibility.placeholder&&!a.$_element.val()){var d=b.asString(a.$_element.attr("placeholder"));d&&a.$_element.addClass("placeholder").val(d)}},A=function(a){a=a.data;c&&c!==a.__self&&c.as(d.Element).blur();if(!a.disabled)return c!==a.__self&&a.$_element.focus(),
!1},v=function(a){a=a.data;c&&c!==a.__self&&c.as(d.Element).blur();c=a.__self;a.$_textbox.addClass("focused");a.$_element.hasClass("floating")&&a.$_element.addClass("focused");b.compatibility.placeholder||a.$_element.hasClass("placeholder")&&a.$_element.removeClass("placeholder").val("")},w=function(a){if(13==a.which)return a.preventDefault(),a.data.$_textbox.closest("form").find('input[type="submit"], input[data-submit]').first().click(),!1},B=function(a){if(c===a.data.__self)return!1};b.property(d,
"Textbox",{e:!0,v:b(d.Element,function(a){this.__base(a);this.$_textbox=f('<span class="input" />');this.$_wrapper=f('<span class="fwrapper textbox" />');a=b.asString(this.$_element.attr("class"));var c=b.asString(this.$_element.attr("style"));a&&this.$_wrapper.data(b.settings.JQUERY_DATA_PREFIX+"class",a).addClass(a);c&&this.$_wrapper.data(b.settings.JQUERY_DATA_PREFIX+"style",c).attr("style",c);this.$_wrapper.append(this.$_textbox.bind("click",this,A).bind("vmousedown",this,B).append(this.$_element.after(this.$_wrapper).detach().removeAttr("class").removeAttr("style").bind("blur",
this,u).bind("focus",this,v).bind("keydown",this,w)));!b.compatibility.placeholder&&!this.$_element.val()&&(a=b.asString(this.$_element.attr("placeholder")))&&this.$_element.addClass("placeholder").val(a)},{"protected $_textbox":null,"protected $_wrapper":null,"public override blur":function(){if(!this.__base.blur())return this;this.$_element.blur();return this},"public override dispose":function(){this.__base.dispose();var a=this.$_wrapper.data(b.settings.JQUERY_DATA_PREFIX+"class"),c=this.$_wrapper.data(b.settings.JQUERY_DATA_PREFIX+
"style");a?this.$_element.attr("class",a):this.$_element.removeAttr("class");c?this.$_element.attr("style",c):this.$_element.removeAttr("style");this.$_wrapper.before(this.$_element.detach().unbind("blur",u).unbind("focus",v).unbind("keydown",w)).remove()},"public override focus":function(){if(!this.__base.focus())return this;b.scrollTo(this.$_wrapper);this.$_element.focus();return this},"public override reset":function(){this.__base.reset();this.$_textbox.removeClass("error");this.value=this.$_element.prop("defaultValue");
return this},"public override disabled":{set:function(a){(this.__base.disabled=a)?this.$_textbox.addClass("disabled"):this.$_textbox.removeClass("disabled")}},"public placeholder":{get:function(){return b.asString(this.$_element.attr("placeholder"))},set:function(a){(a=b.asString(a))?this.$_element.attr("placeholder",a):this.$_element.removeAttr("placeholder");!b.compatibility.placeholder&&this.$_textbox.hasClass("placeholder")&&this.$_element.val(a)}},"public virtual value":{get:function(){return!b.compatibility.placeholder&&
this.$_textbox.hasClass("placeholder")?"":b.asString(this.$_element.val())},set:function(a){a=b.asString(a);this.$_element.val(a);b.compatibility.placeholder||(a?this.$_textbox.removeClass("placeholder"):(this.$_element.val(b.asString(this.$_element.attr("placeholder"))),this.$_textbox.addClass("placeholder")))}},"public override visible":{get:function(){return!this.$_textbox.is(":hidden")}}})});x.call(p,b,"forms",{configurable:!1,enumerable:!0,value:d,writable:!1})})(window,window.jQuery,jTypes);